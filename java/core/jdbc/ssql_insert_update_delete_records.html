<!DOCTYPE html><html lang="en">
<head>
<title>SelimSql Insert/Update/Delete Records</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<meta http-equiv="copyright" content="SelimSql 2009"/>
<meta name="author" content="Zülkif Güven"/>
<meta name="description" content="SelimSql database management system"/>
<meta name="email" content="selimsqldb@gmail.com"/>
<meta name="distribution" content="global"/>
<meta name="rating" content="General"/>
<meta name="resource-type" content="document"/>
<meta name="clientbase" content="global"/>
<meta name="audience" content="all"/>
<meta name="page-type" content="document"/>
<meta name="content-type" content="HTML"/>
<meta name="keywords" content="selimsql,jdbc,driver,connection,java,file,database,class,forName,DriverManager,ClassNotFoundException,insert,update,delete,record,executeUpdate,statement,createStatement"/>

<link href="../../../images/favicon.ico" rel="shortcut icon" type="image/x-icon"/>

<link href="../../../styles/w3.css" media="screen" rel="stylesheet" title="CSS" type="text/css"/>
<link href="../../../styles/styleExtra.css" media="screen" rel="stylesheet" title="CSS" type="text/css"/>
</head>

<body>
<div class="w3-row my-light-teal">
  <div class="w3-col w3-container m1 w3-hide-small">
  </div>

  <div class="w3-col w3-container m10">
    <h1 class="my-font-family my-font-weight-bold">SelimSql</h1>
    <h3 class="my-font-family my-font-weight-bold">Database Management System</h3>
  </div>

  <div class="w3-col w3-container m1 w3-hide-small">
  </div>
</div>

<div class="w3-row w3-teal">
  <div class="w3-col w3-container m1 w3-hide-small">
  </div>

  <div class="w3-col m10 my-margin-top5px my-margin-bottom5px">
    <a href="../../../index.html" class="w3-button w3-round-large w3-lime w3-hover-aqua w3-padding-small my-margin-left5px">Main Page</a>
    <a href="../../../guide.html" class="w3-button w3-round-large w3-lime w3-hover-aqua w3-padding-small my-margin-left5px">User Guide</a>
    <a href="../../../download.html" class="w3-button w3-round-large w3-lime w3-hover-aqua w3-padding-small my-margin-left5px">Download</a>
    <a href="../../../java_code.html" class="w3-button w3-round-large w3-lime w3-hover-aqua w3-padding-small my-margin-left5px">Java Code</a>
    <a href="../../../ssqldbadmin_android.html" class="w3-button w3-round-large w3-lime w3-hover-aqua w3-padding-small my-margin-left5px">Android</a>
    <a href="../../../contact.html" class="w3-button w3-round-large w3-lime w3-hover-aqua w3-padding-small my-margin-left5px">Contact</a>
  </div>

  <div class="w3-col w3-container m1 w3-hide-small">
  </div>
</div>


<div class="w3-row">
  <div class="w3-col w3-container m1 w3-hide-small">
  </div>

  <div class="w3-col my-container m8">
   <h3>Insert/Update/Delete Records</h3>

<h4>Summary Code Sample</h4>

<pre class="bgrect">
Class.forName("selimsql.jdbc.DbDriver");
String url = "jdbc:selimsql:file:TestSale";
String user = "admin";
String pass = null; //No password.
Connection connection = DriverManager.getConnection(url, user, pass);

<b>
Statement statement = connection.createStatement();
String sql = "INSERT INTO Product(Id, Name, Price, ProductDate, Status, Comment, Photo)"
           + " VALUES(1, 'Product1', 12.35, today(), 'A', null, null)";
statement.executeUpdate(sql);

sql = "update Product"
    + " set Photo = BinaryFromFile('http://www.selimsql.com/imageTest/Notebook.png')"
    + " where Id = 2";
statement.executeUpdate(sql);
</b>
statement.close();

connection.close();
</pre>
<br/>


<h4>Detail Steps</h4>
<h4>1. DmlOpSSqlDb.java</h4>
<pre class="bgrect">
package selimsql.test;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class DmlOpSSqlDb {

  private static final String SELIMSQL_JDBC_CLASS      = "selimsql.jdbc.DbDriver";
  private static final String SELIMSQL_JDBC_URL_HEADER = "jdbc:selimsql:";
  private static final String SELIMSQL_DB_TYPE_FILE    = "file";
  private static final String SELIMSQL_DB_TEST_NAME    = "TestDb";

  private static final String TESTDB_USER_ADMIN        = "admin";
  private static final String TESTDB_PASS_NONE         = null;

  public Connection connectDb(String dbName) {
    System.out.println("-SelimSql Connection Testing ------");
    try {
      Class.forName(SELIMSQL_JDBC_CLASS);
    }
    catch(ClassNotFoundException e) {
      System.out.println("No driver for SelimSql?");
      return null;
    }
    System.out.println("SelimSql JDBC Driver Registered!");

    Connection con = null;
    try {
      String url = SELIMSQL_JDBC_URL_HEADER + SELIMSQL_DB_TYPE_FILE + ":" + dbName;
      con = DriverManager.getConnection(url, TESTDB_USER_ADMIN, TESTDB_PASS_NONE);
    }
    catch(SQLException e) {
      System.out.println("Error while connetion:" + e.getMessage());
    }

    if (con!=null)
      System.out.println("Connection succesfull.");
    else
      System.out.println("Connection failed!");

    return con;
  }

  public boolean closeDb(Connection connection) {
    System.out.println("-SelimSql Closing ------");
    if (connection==null) {
      System.out.println("No connection for SelimSql");
      return false;
    }

    try {
      if (connection.isClosed()) {
        System.out.println("Connection is already closed!");
        return false;
      }

      connection.close();
      System.out.println("Connection closed.");
      return true;
    }
    catch(SQLException e) {
      return false;
    }
  }

  private int statementExecuteUpdate(Statement statement, String sql) {
    try {
      int number = statement.executeUpdate(sql);
      System.out.println("-Statement Sql executed(number:" + number + ")");
      System.out.println(sql);
      System.out.println();
      return number;
    }
    catch(SQLException ex) {
      System.out.println("Error:" + ex.getMessage());
      return 0;
    }
  }

  public boolean insertUpdateDeleteRecords(Connection connection) throws SQLException {
    System.out.println("-SelimSql insertUpdateDelete operations ------");
    Statement statement = null;
    try {
      statement = connection.createStatement();
      System.out.println("connection.statement okay.");
      //statement.setMaxRows(100);

      //Insert Product rows ---------------
      String sql = "INSERT INTO Product(Id, Name, Price, ProductDate, Status, Comment, Photo)"
            + " VALUES(1, 'Product1', 12.35, today(), 'A', null, null)";
      statementExecuteUpdate(statement, sql);

      //---------------------------
      sql = "INSERT INTO Product"
        + " VALUES(2, 'Product2', 23.68, TODAY(-1), 'P', null, null)";
      statementExecuteUpdate(statement, sql);

      //---------------------------
      sql = "INSERT INTO Product"
        + " VALUES(3, 'Product3', 80.79, TODAY(-2), 'A', null, null)";
      statementExecuteUpdate(statement, sql);

      //---------------------------
      sql = "INSERT INTO Product"
        + " VALUES(5, 'Product5', 12.69, TODAY(), 'P', null, null)";
      statementExecuteUpdate(statement, sql);

      //---------------------------
      sql = "update Product"
        + " set Comment = Name + ' Comment Description Long.'"
        + " where Id &lt;= 3";
      statementExecuteUpdate(statement, sql);

      //---------------------------
      sql = "update Product"
        + " set Photo = BinaryFromFile('./Notebook.png')"
        //set Photo = BinaryFromFile('http://www.selimsql.com/imageTest/Notebook.png')"
        + " where Id = 2";
      statementExecuteUpdate(statement, sql);

      //---------------------------
      sql = "delete from Product"
        + " where Name = 'Product5'";
      statementExecuteUpdate(statement, sql);


      //Insert Customer rows ---------------
      sql = "insert into Customer"
        + " values(11, datefromstr('28.08.2014','dd.MM.yyyy'), 'Fatih', 'Songul', 'M', null, 'abc@yahoo.com')";
      statementExecuteUpdate(statement, sql);

      sql = "insert into Customer"
        + " values(12, today(-10), 'Selim', 'Eren', 'M', null, 'selim@yahoo.com')";
      statementExecuteUpdate(statement, sql);

      sql = "insert into Customer"
        + " values(13, today(-10), 'Habibe', 'Güven', 'F', null, 'hguven@yahoo.com')";
      statementExecuteUpdate(statement, sql);


      //Insert Order rows  ---------------
      sql = "insert into Order"
        + " values(101, 11, 1, today(), 2, 16.45, 'CASH', 'A')";
      statementExecuteUpdate(statement, sql);

      sql = "insert into Order"
        + " values(102, 11, 2, today(-3), 3, 5, 'CREDIT', 'A')";
      statementExecuteUpdate(statement, sql);

      sql = "insert into Order"
        + " values(103, 11, 3, today(-1), 1, 7.65, 'CREDIT', 'A')";
      statementExecuteUpdate(statement, sql);

      sql = "insert into Order"
        + " values(104, 12, 1, today(-3), 2, 16.45, 'CASH', 'A')";
      statementExecuteUpdate(statement, sql);

      sql = "insert into Order"
        + " values(105, 12, 2, today(-7), 5, 5, 'CASH', 'A')";
      statementExecuteUpdate(statement, sql);

      sql = "insert into Order"
        + " values(106, 13, 3, today(-6), 6, 7.65, 'CREDIT', 'A')";
      statementExecuteUpdate(statement, sql);

      sql = "insert into Order"
        + " values(107, 13, 2, today(-5), 2, 7.65, 'CASH', 'A')";
      statementExecuteUpdate(statement, sql);
    }
    finally {
      if (statement!=null) {
        statement.close();
        System.out.println("connection.statement closed.");
      }
    }
    return (statement!=null);
  }

  public static void main(String[] args) {
    DmlOpSSqlDb jdbcTest = new DmlOpSSqlDb();
    Connection dbConnection = null;
    try {
      dbConnection = jdbcTest.connectDb(SELIMSQL_DB_TEST_NAME);
      jdbcTest.insertUpdateDeleteRecords(dbConnection);
    }
    catch(SQLException e) {
      System.out.println("Error:" + e.getMessage());
    }
    finally {
      jdbcTest.closeDb(dbConnection);
    }
  }
}
</pre>
<br/><br/>

<h4>2. Compile DmlOpSSqlDb.java</h4>
<pre class="bgrect">
md bin
javac src/selimsql/test/DmlOpSSqlDb.java -d bin
</pre>
<br/>


<h4>3. Download SelimSql JDBC Driver</h4>

Download <a href="../../../download#selimSqlDriver">SelimSqlDriver.jar</a> and put it into "lib" directory.
<br/><br/><br/>



<h4>4. Run DmlOpSSqlDb</h4>
<pre class="bgrect">
java -cp "bin;lib/selimSql-1.2.7.jar" selimsql.test.DmlOpSSqlDb
</pre>
<br/>


<h4>Download Source Code</h4>

Download source code: <a href="source/SSqlDbSample.zip">SSqlDbSample.zip</a>
<br/><br/><br/>
  </div>

  <!--For ADS -->
  <div class="w3-col m2 w3-center">
  </div>

  <div class="w3-col w3-container m1 w3-hide-small">
  </div>
</div>


<div class="w3-row">
  <div class="w3-col w3-container m1 w3-hide-small">
  </div>

  <div class="w3-col w3-container m8 w3-teal">
    <p style="text-align:right;font-size:x-small;">Copyright &copy; 2009 - 2019 SelimSql</p>
  </div>

  <div class="w3-col w3-container m3 w3-hide-small">
  </div>
</div>

</body>
</html>
